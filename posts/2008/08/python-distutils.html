<html><body><div dir="ltr" style="text-align: left;">Не секрет, что у Python существует огромная стандартная библиотека с кучей модулей. Но кроме нее, существует просто огроменная коллекция модулей в <a href="http://pypi.python.org/pypi">pypi (Python Package Index)</a>.<br>Однако многие начинающие разработчики сталкиваются с проблемой распространения своих модулей. Можно конечно записать их все в архив и дать пользователям точные инструкции, как все это устанавливать. Однако это неудобно как для пользователей, так и для самих разработчиков. В python у этой проблемы есть простое и элегантное решение - создание стандартных пакетов при помощи модуля <a href="http://docs.python.org/lib/module-distutils.html">distutils</a>.<br><br>Для модуля distuils есть очень подробная дока под названием <a href="http://docs.python.org/dist/dist.html">Distributing Python Modules</a>, но для первого прочтения и решения проблемы по-быстрому она явно сложновата.<br><br>Итак, допустим у нас есть некий проект - библиотека PyFoo. Состоит она из двух файлов и классов: foo.py и bar.py (ну и разумеется пустого файла __init__.py).<br><br><a name="more"></a><br><br>foo.py:<br><pre class="brush: python">#!/usr/bin/env python<br>""" PyFoo package, foo class """<br><br><br>class Foo:<br>    """ Make a foo """<br><br>    def foo(self):<br>        return "foo"<br></pre><br>bar.py:<br><pre class="brush: python">#!/usr/bin/env python<br>""" PyFoo package, bar class """<br><br><br>class Bar:<br>    """ Make a bar """<br><br>    def bar(self, s):<br>        print '===', s, '==='<br></pre><br>Итак, как же их наиболее удобно распространять?<br><br>Переносим их в директорию pyfoo.<br>А уровнем выше создаем файл setup.py:<br><br><pre class="brush: python">#!/usr/bin/env python<br>""" Setup file for PyFoo package """<br><br>from distutils.core import setup<br>setup(name='pyfoo',<br>      version='1.2.3',<br>      description='PyFoo package',<br>      long_description = "PyFoo makes a foo",<br>      author='Vasya Pupkin',<br>      author_email='vasya@greenmice.info',<br>      url='http://greenmice.info/',<br>      packages=[ 'pyfoo', ],<br><br>      classifiers=(<br>          'Development Status :: 2 - Pre-Alpha',<br>          'Environment :: Console',<br>          'License :: OSI Approved :: GNU General Public License (GPL)',<br>          'Operating System :: POSIX',<br>          'Operating System :: Unix',<br>          'Programming Language :: Python',<br>        ),<br>      license="GPL-2"<br>     )<br></pre><br>Я думаю тут все вполне понятно. Список принятых classifiers можно <a href="http://pypi.python.org/pypi?%3Aaction=list_classifiers">посмотреть на pypi</a>.<br><br>Теперь достаточно сделать<br><pre class="brush: python">python setup.py sdist</pre>и просто магическим образом появляется директория dist с файлом pyfoo-1.2.3.tar.gz.<br><br>Теперь любому пользователю достаточно распаковать этот архив и сказать <code lang="bash">python setup.py install</code>. Все файлы модуля окажутся там где им положено быть (например, в /usr/lib/python2.5/site-packages/pyfoo).<br><br>Ок. А что делать с исполняемыми файлами?<br><br>Создадим тестик к нашему пакажду (pyfoo_test.py):<br><pre class="brush: python">#!/usr/bin/env python<br>""" PyFoo package test """<br><br>from pyfoo import foo, bar<br><br>f = foo.Foo()<br>b = bar.Bar()<br><br>print f.foo()<br>b.bar("Hello, world!")<br></pre><br>И модифицируем setup.py следующим образом:<br><pre class="brush: python">#!/usr/bin/env python<br>""" Setup file for PyFoo package """<br><br>from distutils.core import setup<br>setup(name='pyfoo',<br>      version='4.5.6',<br>      description='PyFoo package',<br>      long_description = "PyFoo makes a foo",<br>      author='Vasya Pupkin',<br>      author_email='vasya@greenmice.info',<br>      url='http://greenmice.info/',<br>      packages=[ 'pyfoo', ],<br>      scripts=['pyfoo_test.py'],<br><br>      classifiers=(<br>          'Development Status :: 2 - Pre-Alpha',<br>          'Environment :: Console',<br>          'License :: OSI Approved :: GNU General Public License (GPL)',<br>          'Operating System :: POSIX',<br>          'Operating System :: Unix',<br>          'Programming Language :: Python',<br>        ),<br>      license="GPL-2"<br>     )<br></pre><br>Как видно, все очень лекго и удобно.<br>Для начала хватит, а если хочется большего - пожалуйте в <a href="http://docs.python.org/dist/dist.html">документацию</a></div></body></html>